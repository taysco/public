
TO-DO:  LEAVE THIS HERE WHERE WE CAN SEE IT :)
"""""
- files '.mv' move directories  [andrej]
- '.sort' to sort files

BUG REPORTS:
* DCC sends are causing memory leaks on some systems.  This affects shared
  userfile transfers
* Some tcl scripts handling idxes that worked before are spitting out invalid
  idx errors
* tcl8.0 doesnt like eggdrop in some situations
* solve to non-working alarm(10) in linux

SUGGESTIONS:

* Make +u channel specific so it shares info from all but that channel.
* Channel specific file ownerships (ie, only people on a certain channel
  can get certain files)
* Move more things into NO_IRC such as bans and hostmasks
* Move NO_IRC to irc.so
* Make a chan/global +s for sharing, instead of the +shared option?

Changes in eggdrop:
""""""""""""""""""

v1.1.5

* putegg will now handle "Text file busy" conditions when trying to
  copy eggdrop [BB]
* putegg now has options of saving old binary as oeggdrop and
  options to copy botchk and eggdrop.conf [Ghost/BB]
* putegg now backs up modules aswell as eggdrop [beldin]
* /msg whois now return slightly more usefull info [beldin]
* configure & Makefile improvements -- Forces you to "make clean"
  when remaking from non-module to module version, etc. [BB]
* chattr was sending twice to sharebots [beldin]
* bot's IRC nick can now be NICKLEN long [beldin]
* .restart now kinda works right [beldin]
* loadmodule/unloadmodule/modules now return non-fatal errors when
  used on non-module executables (You can leave the loadmodule <module>
  lines in the config file) [BB]
* start of help file grammar cleanup [BB]
* people are gunna hate me for it, but I ran the code through ident :P [beldin]
* fixed large-file turbo-dcc send crashes [beldin]

Modules only:

* tweaking filesys module hooks [beldin]
* .files/.help is fixed [beldin]
* minutely/hourly/daily/userfile hooks added [beldin]
* filesys is now transfer + filesys [beldin]
* finally got the Makefiles working nicely so new modules need only
  add a new directory [beldin]
  
v1.1.4 

* WOOP modules seems to work on Linux, FreeBSD, SunOS, BSD3.0, now
  we just gotta debug each module... [beldin]
* some minor fixes to nick changing [beldin]
* fixed dcc_chat wasnt cleaning up control chars propery [beldin]
* fixed .dccsimul Usage [beldin]
* fixed .chattr <user> [beldin]
* .adduser only ops non @'s on chan [beldin]
* passwords can now be upto 15 characters long [beldin]

v1.1.3+pl3

* +nat patch added [Bill Brandt]
* stickybans will now be sent over the botnet [beldin]
* you should be able to -DEBUG_MEM again no problems [beldin]
* .bots/.set should truncate right now [beldin]
* .status all shows dynamic channels [beldin]
* .chattr user +o  (global) now rechecks channels [beldin]
* getops-1.8.tcl [dtm]
* more alltools [david]

v1.1.3+pl2

* minor fixes [beldin]
* encryption module - bot requires AN encryption modules [beldin]
* additions to action.fix.tcl, console.tcl + addition of alltools.tc
  [david]
* fixed my dprintf messups, it's now you're generic output friend [beldin]
* dccputchan works for local chans now [david]
* .channel should now display the channel topic [eraseme]
* woops, the filedb size was wrong [beldin]

v1.1.3+pl1

* made dozens of fixes to the help files, doc's, eggdrop.conf [EraseMe]
* upgraded weed to 1.1 format [dtm/eclipse]

v1.1.3

* loadable code modules, see MODULES for info [beldin]
  this is a lot of changes, beware! :)
  this includes:
    * +module/-module/modules dcc commands
    * loadmodule/unloadmodule tcl commands
    * a whole pile of support functions (see modules.c/.h)
    * creating 2 example modules assoc & filesys
  *THIS WILL ONLY WORK CURRENTLY ON SYSTEMS WITH dlopen*
  so dont try it if you dont have dlopen ;)

* tcl binds wasnt return all the bindings on error [beldin]
* doc updates to various function [beldin]
* msg info shouldnt need a password if the user doesnt have one [beldin]
* fixes to dtm's fixes <G> [beldin]
* Makefiles now use Makefile.dep and have a general cleanup [beldin]
* checks in dcc_telnet_new/cmd_chnick/cmd_nick to prevent nicks starting
  with characters that will screw the userfile [found by robey] [beldin]
* su now fixes your nick correctly [robey]
* filestat wasnt loggin [found by robey]
* dprintf does everything now, buts (go directly to tputs) & server [beldin]
* lostdcc pops the last dcc entry into the lost ones place rather than 
  copying them all down 1 [beldin]
* new_dcc & new_fork for creating new dcc entries [beldin]
* neatened init_builtins [beldin]
* global ops can do GO now too [beldin]

v1.1.2+pl2

* fixed up eggdrop.conf, botchk, CONTENTS, eggdrop.doc, deleted some older
  scripts, and deleted files lying around where they shouldn't have been,
  as well as some spelling mistakes in addpatch, etc [EraseMe]
* upgraded samples.tcl to 1.1 format [EraseMe] 

v1.1.2+pl1(dtm/bel)

* botnet version now sends the version number and this is used to check
  for userfile sharing (wont share with a bot with version < min_share in 
  main.c) [beldin]
* sharebots now pass chattr as flags rather than an int [beldin]
* filedb's now store flags as flags rather than an int [beldin]
  [NOTE- this changes the way the filedb info is stored and may cause some
  lost settings, and require you to rm .filedb files- beldin]
* channel add & .+chan wont let you set non #/& channels [beldin]
* only 1 bit per userflag please! *doh* [beldin]
* some tclegg.h prototypes needed PROTO()' & therefore tclegg.h incudes
  proto.h now [beldin]
* copied a few detail in nick updating the were missed when it returned
  to the old method [beldin]
* GO will work for global +o now [beldin]
* strip will now strip ansi codes too (+a) [beldin]
* kick/ban comments starting with @ will not be displayed [beldin]
* dtm's fixes for tcl8.0 & non-argument commands [dtm]

v1.1.2

* .assoc wasnt working right for local channels [found by David-] [beldin]
* minor fix to getop-1.7.tcl [dtm]
* change optimization back to -O2 saving executable size & sunos/bsd 
  crashes [beldin]
* version number is now in the form   abbccdd   a = major ver. (1 atm)
  bb = minor ver (1 atm) cc = revision (2 atm) dd = patch count
* tcl assoc "channel name" return channel number [suggested by Eraseme]
  [beldin]
* made .banner neater (1 line) [suggest by Eraseme] [beldin]
* -chan was leaving dccchat users with that channel in a mess [beldin]
* more help files [beldin]

v1.1.1+pl2(wild/bel)

* made ctcp_version default acutally SAY eggdrop, and sanity check on string
  lengths [beldin]
* tcl isdynamic & tcl notes commands added [beldin]
* resolve_dir belongs in proto.h not files.h [wild]
* many minor code neatenings [wild]
* -chan would cause the bot to leave & rejoin & get confused [wild]
* all the trace functions (got206/401/402) merge into trace_failed [wild]
* +f/+d/+k are now global flags, also chan-specific +d/+o should override
  global settings [by beldin]
* eforced channel key was not beign set if no key at all was set [beldin]
* put the socks in the parts you fix weenie! [wild]
* channel creation wasnt clearing the mode stack properly [found by TheGhost]
  [beldin]
  
v1.1.1+pl1

* long topics mess up channel info [found by Randy Summerfiled] [beldin]
* a binding causing a tcl error returning too long a string crashed
  (now truncated) [by beldin]
* tcl whom * returns all users on the botnet, with a extra element
  per user indicating channel [suggested by eraseme/dtm] [beldin]
* .status shows shared setting now [found by TheGhost] [beldin]
* +shared shows up in .chaninfo, cant be set via .chanset, added
  to eggdrop.conf [beldin]
* +ban should work now for channel+o's [beldin]
* chanadd/chandel now +chan/-chan (fits the pattern) [idea stolen
  from CFusion <G>]
* new tcl commands mv,cp,mkdir,rmdir,setflags,getflags [beldin]
* new tcl command strftime [panasync] including using now [beldin]

v1.1.1

* Made channels require +share to share [by Raistlin]
* Made sharing of only some channels possible [by Raistlin]
* Made default version, clientinfo, userinfo "Eggdrop" and removed
  lines in config changing it (Idiot proofing) [by Raistlin]
* Moved default net to FDFNet (We encourage bots) [by Raistlin]
* fixed a bug in /msg op & /msg notes where long args were causing 
  SEGV's [found by guppy] [by beldin]
* moved the following settings from eggdrop.h to eggdrop.conf
  modes-per-line, max-queue-msg, wait-split, wait-info, xfer-timeout,
  default-port & note-life [by beldin]
* made it so it *should* compile under sun-os and still allow full
  prototypes for real compilers :) [by beldin]
* fixed the fixes in bottree/page code so it'll compile on some sunos
  boxes (at the expense of speed :( [by beldin]
* cleaned up help/dcc/set (since set is now a +n command) & added
  info about recent new tcl variables [by beldin]
* Includes Getops-1.7 [by dtM]
 
v1.1.0+pl3

* commented out the desynch "fixing" in getops-1.5.tcl,
  it *doesnt* work on a lagged network [found by OldGhost] [by beldin]
* fixed to places where IP #'s were backwards in .dccstat [by beldin]
* fixed tell_bottree so it sends a line at a time, therefore not confusing
  the paging code [by beldin]
* fixed the paging code so flooders didnt crash it 
  [found by ???] [by beldin]
* was forgetting to free up store lines when a .page'n dcc chatter left 
  early [by beldin]
* a couple of part messages were missing the sock #'s [by beldin]
* botnet version now put's <> around the network [suggestion by EraseMe?]
  [by beldin]
* fixed global laston time in .whois so it now displays accurately
  [by beldin]
* tcl page was crashing [found by somni] [by beldin]
* tcl bind was crashing (with no args) [found by somni] [by beldin]
* added another ifdef EBUG (for stridx) [by beldin]
* fixed ^H bug in dcc chat [found by ???anybody???] [by beldin]
* made putdcc use dumplots [found by Donovan Long] [by beldin]
* .restart now totally restarts tcl by delaying restart of tcl till
  it's outside of tcl [by beldin]
* 16 context list when -DEBUG works now [by beldin]

v1.1.0+pl2

* made MAXNOTES a tcl variable (max-notes) added to config file also [wild]
* Output debugging now checks for linefeeds and trims them, instead
  of assuming the last char is a linefeed, marked the type also e.g.
  tprintf is [!t] instead of [!] [wild]
* Channel ops and such couldn't remove a channel ban if a global ban
  that matched existed [wild]
* -ban now also removes bans that are on a channel, but not in the 
  banlist (the code was there but not being used) [wild]
* When sharing, leaf-bots were getting dupes of channel bans, they are now
  removed first if the hub is sharing bans for that channel [wild, beldin]
* added some more ifdef EBUG 's [wild]
* ifdef EBUG_OUTPUT in eggdrop.h was supposed to define EBUG, but it was
  defining DEBUG instead (whoops :) [wild]
* various functions in cmds.c concerning global/channel op commands were
  improved. [wild]
* Moved putlogs in bot_pls_banchan and bot_mns_banchan to not show if the 
  bot isn't guarding that channel [wild]
* debugs to hide password's in tclhash.c now work proper. [wild]

v1.1.0+pl1

* tcl adduser wasn't truncating nick to 9 characters [found by CFusion]
  [patch by beldin]
* fixed getops-1.2.tcl->getops-1.5.tcl [by dtM]
* removed getops-1.1.tcl, gainops1.tcl (old scripts)
* Fixed tcl chpass, so chpass <nick> "" will remove passwords 
  [found by madhack] [patch by beldin]
* Fixed .newpass <pass> error (needed 2 arguments to work)
  [found by guppy] [patch by beldin]
* Fixed chon bug with console.tcl [found by Jerry Sutton] [patch by dk]
* Fixed small compiler bugs with DIE_SIGHUP and DIE_TERM.  fatal had
  the wrong number of args.  [found by Alex] [patch by dk]
* put <> around the network in botinfo [suggested by LuckyStar] [patch by dk]
* Owners can't su to other owners without a pass (saw as a security
  risk) [patch by Mastr]
* Can't su to a Bots [patch by Mastr]
* Added help file for .fixcodes [by beldin]

v1.1.0

* Fixed nick tracing bug on EFNet.  Reverted back to old style tracing.
  Added support for 401 and 206 numerics for trace failed [patch by dk]
* Fixed BSD fatal bug when users join party-line [patch by dk]
* Removed various "junk" out of hash.h and cmds.c [patch by dk]
* Finished moving full prototypes into proto.h [patch by dk]
* Fixed conflict in console settings between global and channel master
  [reported by Wild] [patch by dk]
* Added compile time setting of ENABLE_TCL_DCCSIMUL to enable dccsimul tcl
  command [patch by dk]
* Added check if NO_IRC is defined, so is NO_FILE_SYSTEM [patch by dk]
* Added tcl commands rehash and restart [patch by dk]
* Added check to see if already linked to +sh in autocycle [patch by
  LuckyStar]
* Fixed bug in botchk script.  Bourne shell isn't leet enough to know what
  elif is... *shrug* [patch by LuckyStar]
* Added 1 minute wait before accepting links back in [patch by dk]
* some more clean-up (typos, code, etc) [wild]
* Fixed problems created with the addition of dynamic channels: [wild]

** Added flag CHANSTATIC for channels defined in the config file
** Added a \n to one of the fprintf statements in the save channel's 
   routine (was cuasing a crash if there were no dynamic channels)
** channels written to channel-file no longer include channels 
   defined in the config-file (will only write the header there are
   no dynamic channels)
** dynamic channel commands changed to reflect difference between
   dynamic channels, and config-file channels (static)
** chandel can no longer remove channels marked CHANSTATIC
 
* commented out joins in connect_server (main.c) this was causing the bot
  to get numeric 451 and jump servers (do we really need 451 and 206?) [wild]
* added SILENCE define for ircdu's silence command [wild]
* changed channel defalts to +DYNAMICBANS instead of +ENFORCBANS (my test
  bot kept dumping 200+ bans to channels that i added, even when it
  wasn't opped :/ ) [wild]
* Bot was confused about current channel modes with new added channels
  before it recieved channel mode info back from the server [wild]
* the last patch messed up tell_user (so sue me :) [wild]
* changed NICK to TRACE in chanprog(), and nick_change(new) [wild]
* added an #ifdef EBUG to tcl_builtin [suggested by beldin]
* kill -USR1 was leaving a socket (file) used to write DEBUG around
  after finishing [beldin]
* moved last 16 context's stuff into DEBUG [beldin]
* added command logging for the .chan commands [beldin]
* fixed compiler warnings in cmds.c and tcldcc.c for cmd_pls_ban,
  tcl_rehash, and tcl_restart [wild]
* now compiles with NO_IRC defined [wild]
* fixed missing prototypes [wild]
* did some help file and tcl-command.doc updates [wild]
* some code clean-up [wild]
* added tcl validchan [wild]
* piped got401 into got402 (they are the same :) [wild]
* removed unvia recursively calling itslef (finally) [suggested by beldin]
* refresh_ban_kick was losing the sticky feature of bans [wild]
* check_tcl_chpt wasn't working again (now leave it be!) [wild]
* removed extra line feeds in debug_output debugging [wild]
* added a rotating buffer of 16 context's, allowing a list of the last
  16 contexts passed report, usefull fo debuggin strange erros [patch by
  beldin]
* fixed a bug in .files due to paging code [patch by beldin]
* added command logging of .page (yup, didnt get it right the first time ;)
  [patch by beldin]
* added a counter for messages stored, booting users off if they hit 1000
  lines, heck, if they get that high they're trying to cause trouble :) [patch
  by beldin]
* added a check in write_debug to prevent recursive calls to it, 
  (munching cpu & eventually crashing ) writes a simpler DEBUG.DEBUG [patch
  by beldin]
* added a whole pile of '\n's I forgot :) [patch by beldin]
* auto-op wasnt opping global ops [patch by beldin]
* Fixed an .unlink bug introduced in pl3+bel where a remote unlink
  wouldn't work. [poptix]
* Fixed up OUTPUT debugging. [poptix]
* Added a lot of context lines to the main DCC loop. [poptix]
* Fixed multiple numeric discrepincies (sp) between Efnet and the RFC [poptix]
* Fixed another 'chanlist bug' so that bots arent overlooked in channel
  specific flag matches [poptix]
* fixed a minor bug in the mode storage by wild (wasnt maintaining
  +l imit correctly) [by beldin]
* started (done blowfish.c) making full prototypes in proto.h [patch by beldin]
* added a .page command (and related tcl page)
  when a user has paging on (.page <number>) then every number lines
  the bot stops sending the info and queues for later sending
  (usefull in telnet where there's normally noway to look back) [patch by
  beldin]
* add .chanadd, .chandell, .chaninfo, .chanset, .chansave, .chanload
  (+ tcl savechannels, loadchannels)  to modify channel settings
  from the console, +n for add/del, +N for save/load/set, +M for info [patch
  by beldin]
* added channel-file tcl variable for saving channel info [patch by beldin]
* added docs for all of the above [patch by beldin]
* added EVEN MORE space to the version string, since we just broke 256 
  chars [patch by beldin]
* added a time binding, "min hour day month year" is the match, and the
  parameters [patch by beldin]
* somewhere along the line someone lost a ! in cmd_boot  
  [found by melvan]
* Greatly improved the way the bot keeps track of its nick (it doesn't
  assume it's going to get the nick anymore, it waits for the NICK from
  the server) [poptix]
* Added support for the 206 (RPL_TRACESERVER) and 351 (RPL_VERSION) numerics
  the VERSION numeric is used to check the bots current nick and the TRACESERVER  numeric is what ircu2.9.30 and up respond with instead of TRACEFAILED (which
  was part of the NICK problems) [found and patched by poptix]
* Updated get-in-ops to v1.2 [poptix]
* Added adbseen.tcl and adbtools.tcl to the scripts directory. [poptix]
* Added tcl command "putidx" for use in script connections it's a bit
  faster than putdcc and uses qprintf (new) much like tprintf except
  you provide it with an idx instead of port. [poptix]
* Added '.fixcodes' command to fix the telnet codes when they aren't right
  (say if you didn't really telnet to the bot but it thought you had it
  still sent the nasty codes) [poptix]
* Fixed another /ctcp chat bug where the \n was left out [poptix]
* added more output debugging [wild]
* killed extra line feeds in for output debug's [wild]
* the bot was sending mode #channel (protect modes) with almost every
  mode change, and even console changes, now keeps a current modes for
  each channel, and sends the modes when they do not match [wild]
* unsetting of read only variables from tcl scripts is no longer possible
   hmm must I do everything the hard way the first time around ? :) [wild]
* a little better enforcement of sticky bans (bot will keep them active
  as long as it is in the channel and opped) [wild] [suggested by ?]
* removed unvia recursivey calling itself [suggested by beldin]
* a couple other minor things with passwords masking and proto.h
* fixed .act & .say to not cut out the first word [beldin]
  [found by pattyt]
* fixed a bug in .unlink <bot>  with no reason [beldin]
* made bot_unlinked split off first arg when parsing [beldin]
* fixed the showinfo on join, so that nasty '@' wouldnt show up,
  also, a globaly locked info line will overide a channel one, unless
  the channel one is locked too (comments???) [beldin] 
* unvia now recursively calls itself to unvia all bots behind it
  [beldin]
* Okay tcl_chanlist works now, and works proper.
  Examples to use it are:
  chanlist #channel n    (owner)
  chanlist #channel n&n  (owner, Channel owner)
  chanlist #channel &o   (Channel op)
  chanlist #channel omnB&omn123567890  etc. etc.
  first read flags are globals, the '&' denotes channel specific flags [Wild]
* +O bound dcc commands are now working proper when checking for +o flag
  either global or for a specific channel (I shoulda seen this) [Wild]
* check_tcl_chpt should be fixed now (was being called from botcmd.c with
  (bot,sock)) [Wild]
* RE: 
  * routine to check for global_op/channel op status on channel (now
    also checks for global owner/master), for +O bound dcc commands,
    affects -/+ban, act, channel, deop, op, invite, kick, kickban,
    resetbans, say, and topic. [patch by Wild]
  This was in there...so I put the changes back in.
* Idle info wasn't updated for ignored users talking in the channel [Wild]
* Started out got302 (someone finish me :) [Wild]
* Fixed a problem I left with masking passwords in debug. [Wild]
* Cleaned up tcl_chanlist [Wild]
--- hayes
* Had to comment out the chpt code in tclhash.c since it was crashing
  everytime it was triggered, someone fix this please :) [poptix]
* the 'chanlist bug' code has been changed back to its previous state
  and the fix has been commented out in the code, this is a FIXME bug
  (we just need to see what OS we are using and some #ifdef's) [poptix]
* Removed all BEL_ defines and made them part of the code. [poptix]
* Removed code that made bot wait until it was online before accepting
  bot links. [poptix]
* Fixed 'say' 'act' 'op' 'deop' 'boot' 'relay' '-/+bot' 'unlink' '-/+user'
  and a lot more commands where if you didn't supply a parameter it acted
  like you had and did weird stuff. [poptix]
* Removed REJECT_FROM_HUBS and REJECT_FROM_NOWHERE due to the enormous
  amount of botnet wars this created.
* Fixed memory usage growing when using .restart [patch by Wild]
* Using console +d you were able to see acutal passwords when changed,
  now just shows as [something] [patch by Wild]
* Bot would crash with tcl chpass <nick> "" (so far i have seen this on
  tcl ver's 7.5 and 7.6) [patch by Wild]
* No longer able to unset read-only variables [patch by Wild]
* Added need-key need-unban and need-limit (like need-op and need-invite) and
  they are called respectively [poptix]
* Added script called getops-1.1.tcl that takes advantage of the above [poptix]
* Added support for the 442 numeric (ERR_NOTONCHANNEL), if it's a channel in
  its list it clears the channel info and sends a JOIN [poptix]
* Made it so it doesnt continually do LUSERS if you have servlimit set to 0
  (or not set at all) [poptix]
* Fixed it when you sent the bot a CTCP CHAT it was sending a 'NOTICE' instead
  of a `PRIVMSG` (so you got a DCC CHAT reply :P) [poptix]
* Added a small 'program' to add patches for you it's called 'addpatch'
  just run 'addpatch [patch]' and it will install it for you then check for
  rejects for you etc. [poptix]
* Updated some more of the docs and the man page (what? eggdrop has a man page?)
  [poptix]
* Changed all references to 'lamestbot' to 'eggdrop.conf' [poptix]
* Fixed the setting of 'laston' during a QUIT [found by ? patch by poptix]
* implicit declaration of gotwall during compile [poptix]
* bug in tclchan.c which cause the bot to crash [patch by Wild]
* routine to check for global_op/channel op status on channel (now
  also checks for global owner/master), for +O bound dcc commands,
  affects -/+ban, act, channel, deop, op, invite, kick, kickban,
  resetbans, say, and topic. [patch by Wild]
* Fixed defines for "BEL_LOCAL_CHANNELS" (it was 'BEL_LOCAL_CHANNEL' in some
  instances and 'BEL_LOCAL_CHANNELS' in others [found & patched by poptix]
* Fixed defines for "REJECT_FROM_HUBS" in some places it was 'REJECT_FROM_HUBS'
  in others it was 'REJECT_FROM_HUBS_ONLY'. [found & patched by poptix]
* Fixed defines for "BEL_LINK_REASON" was 'LINK' in some places and 'UNLINK'
  in others. [found & patched by poptix]
* Fixed an op/deop flood making the bot flood off, the bot was sending
  a 'WHO #chan' and a 'MODE #chan +b' everytime it saw a 'o' [poptix]
* Fixed a '.console' problem with MASTER and OWNER stuff (+n-m) [poptix]
* Added an #ifdef for ENABLE_SIMUL in cmds.c so it doesnt compile the code
  for 'simul' if its not defined :) [poptix]
* Removed a leftover comment about "killing timers" in eggdrop.h [poptix]
* Added descriptions for the BEL_ defines in eggdrop.h since the UPDATES
  file wasnt very descriptive. [poptix]
* Changed default of REJECT_FROM_HUBS to #undef, this was causing a lot
  of botnet wars ... [poptix]
* Fixed a compile warning for 'gotwall' (fixed in proto.h) [poptix]
* Fixed a typo from the BEL_LOCAL_CHANNELS in dcc.c (relat/relay) [poptix]
* Fixed TCL 'bind' error to show 'wall' as "one of the following" [poptix]
* Re-added BEL_NEWLINKS code to botnet.c because a lot of people liked
  it and a lot of code 'doesn't really do anything' [poptix]
* Added command 'su' to s(et) u(ser) to another userid, owners do not require
  a password, everyone else must know the password of the user they are su'ing
  to. [poptix]
* Fixed putegg to exit when ./eggdrop is not present. [poptix]
* Made it do a "JOIN #channel,#channel2,#channel3,#channel4" instead of sending
  a lot of seperate ones. [poptix]
* Fixed a tprintf in cmds.c causing this:
  #poptix# who lamestbot
  !!! writing to nonexistent socket: 2
      'You are on a local channel'
* Moved joins back to got001 because it was causing problems with nospoof
  servers when the JOIN was send before the PONG (besides, if gain-ops
  if crashing the bots then gainops should be fixed :) [poptix]
* Added DEBUG_OUTPUT compile option in Makefile to debug stuff going out
  to the server. [poptix]
* Changed 'chaddr' helpfile to show how to use chaddr to set the botport and
  userport for relays. [poptix]
* Moved "### END OF IMPORTANT STUFF ###" line to _BELOW_ the 'die' line so
  that people don't miss it quite so easily. [poptix]
* Fixed a few things (I wont say what so it isnt abused) that were making the
  bot flood off when you did certain things :) (e-mail me and I might tell you)
  [poptix@WildStar.Net]
* Added information for crontabbing a bot without receiving emails from cron
  [patch by LuckyStar]
* Added a check to botchk for the bot userfile.  If one doesn't exist, look
  for the ~new and then the ~bak userfile. [suggested by LuckyStar] [patch by
  dk]
* Updated flag information in eggdrop.doc [suggested by LuckyStar] [patch by
  dk]
* Added information on Beldin's broadcast, channel join, and channel part
  binds [patch by LuckyStar]
* Updated the tricks file for the new style of binding built-in commands in
  version 1.1.  [suggested by LuckyStar] [patch by dk]
* Updated the eggdrop.conf file to include console info on wallops [suggested
  by LuckyStar] [patch by dk]
* Fixed bug where bot wouldn't compile with BEL_UNLINK_REASON undefed [found
  by EraseMe] [patch by dk]
* Removed BEL_NEWLINKS code from botnet.c as it really was of no use [suggested
  by LuckyStar] [patch by dk]
* Fixed relay bug of bot relaying from still showed the relayer as being on
  the bot [found by LuckyStar] [patch by dk]
* reduced topic array to 255 characters for memory concerns. [patch by dk]
* allowed botnet masters and channel masters to use .status, but only bot
  masters can use .status all [suggested by LuckyStar] [patch by dk]
* botnet masters can't boot bot masters [suggested by LuckyStar] [patch by dk]
* Allowed channel masters to be able to .reset #chan on channels they have
  channel master [suggested by LuckyStar] [patch by dk]
* fixed all DEFAULT_PORT log bugs [found by LuckyStar] [patch by dk]
* added botnet master in dcc_check_attrs for reseting party-line flags [patch
  by dk]
* added wallops and log levels 6-8 to check_dcc_attrs for master console modes
  [patch by dk]
* added dcc_check_chanattrs for all channel flags that operates similar to
  dcc_check_attrs [patch by dk]
* Fixed setting of channel flags bug for botnet masters [found by LuckyStar]
  [patch by dk]
* modified command chattr to include implementation of dcc_check_chanattrs
  [patch by dk]
* fixed bug in +chrec that set flags +okm12 for that user on that channel
  [found by LuckyStar] [patch by dk]
* fixed icon bug for user with no flags.  Should be ' ' not '-'.  [found by
  EraseMe] [patch by dk]
* modified finding of console channel to prioritizing to find channel owner
  if it exists, then channel master, then channel op [suggested by LuckyStar]
  [patch by dk]
* allowed botnet masters to use dccstat [suggested by LuckyStar] [patch by dk]
* made .msg command a global ops only command [suggested by LuckyStar] [patch
  by dk]
* made msg_ident return if someone tried to ident the bots name.  This could
  be used as a detection method [found by TheGhost_] [patch by dk]
* fixed the msg_op bug [found by Jerry Sunton] [patch by dk]
* fixed chanlist bug [found by LuckyStar] [patch by dk]
* fixed dcclist bug [patch by Wild]
* fixed memory leak in userrec.c [found by newdancer] [patch by dk]
* fixed the timezone and gotwall compiler errors [patch by dk]
* added check_tcl_wall code for bindings [patch by dk]
* various fixes to previous UPDATES entries
* updated The Net info from EraseMe
* removed the joins in got001.  Appeared to be making the bot crash whenever
  it tried to run gain-ops on a channel it had ops on already.  [patch by dk]
* fixed "DEFAULT PORT" bug in loging of server jumps [found by LuckyStar]
  [patch by dk]
* fixed botnet master help bug when botmaster had no global ops [found by
  LuckyStar] [patch by dk]
* fixed botnet master to not require +p for partyline access [found by
  LuckyStar] [patch by dk]
* fixed channel owner to also be channel master in sanity_check [patch by dk]
* fixed channel master bug being able to change attributes on other channels
  [found by LuckyStar] [patch by dk]
* fixed channel mster bug being able to set +n on his channel [found by
  LuckyStar] [patch by dk]
* added a fun little useless command (see if you can find it ;*)
* put define BEL_NEWLINKS back into eggdrop.h (don't know how it disappeared
  in the first place...) [found by LuckyStar] [patch by dk] 
* removed define BEL_LINK_SHAREBOTS since it wasn't being used anymore [found
  by LuckyStar] [patch by dk]
* fixed bug in the hourly note notice code.  it was sending a notice for
  every potr being used on the bot. [patch by dk]
* fixed typo in BEL_NEWLINKS autolink function [found by LuckyStar] [patch by
  dk]
* fixed new telnet users being able to use bot's nick [found by EraseMe]
  [patch by dk]
* added a lot of context lines to help tracibility of bugs [patch by dk]
* fixed compile time warnings in cmds.c [patch by beldin]
* added a tcl command resetchan [patch by beldin]
* you can now set the bot to strip various codes which may prove to be
  annoying to you [patch by billyjoe]
* bot will send the join command for each channel upon getting a 001
  numeric, in case a anti-spoofing server rejected them [patch by garbanzo]
* new console (+w) added, will let +m's see the wallops, three more log
  levels added for a total of 8 [patch by garbanzo]
* implemented +n channel flag for channel owner.  channel owner can add and
  remove channel masters and have access to all channel master commands.
  [patch by dk]
* implemented +B botnet master commands.  botnet masters have access to all
  commands that affect bots or the botnet. [patch by dk]
* added commands +/- bothost and chbotattr for botnet masters. [patch by dk]
* allowed channel masters to use status and +/- host for users on their
  channel.  +/- host checks if user has any flags for the channel the channel
  master has master access on.  [patch by dk]
* implemented psuedo flags +O/M/N for tcl commands binds against channel op,
  master, and owner flags respectively.  Binds that came with a channel check
  against that channel's flags.  Binds that don't, check against all channel's
  flags.  +M/N/O cannot be set to a user in the bot.  [patch by dk]
* changed .topic command so that if no arguements are provided, it returns the
  channel's current topic.  also added tcl command topic <channel> that
  returns the topic of that channel. [suggested by Ernesto] [patch by dk]
* fixed bug of sharing out null users [patch by Wild]
* fixed revenge bug where it said "Banning so and so now...", it was setting
  the ban [found by DeathHand] [patch by dk]
* removed function get_tcl_vars since it was just a stub [patch by dk]
* updated help files to reflect new +O/N/M flags [patch by dk]
* modified console command so that channel ops and channel masters that don't
  have global ops or master access can't change their console to a channel
  where they don't have channel ops or master [patch by dk]
* console channel set to the first channel where channel op/master/owner flag
  is detected if user doesn't have respective global attributes when first
  connecting to bot.  console set back to default if no channel flag was
  detected.  [patch by dk]
* added master_anywhere and owner_anywhere functions [patch by dk]
* set ENABLE_TCL to undefined by default [suggested by alot of people]
* added feature that bot notifies users in the bot or on a channel that they
  notes every hour.  minute after the hour that this is done can be set in the
  bot config file with notify-users-at.  [suggested by BlackJac] [patch by dk]
* added variable timezone to config file to be used by tcl scripts [suggested
  by Ernesto] [patch by DK]
* fixed recycling logfiles bug for keep-all-logs [found by BoGuS] [patch by
  dk]
* changed msg_op command so that if a user has no password set, he can't get
  opped for extra security [patch by dk]
* fixed a coding error in tputs in net.c when logging an error [patch by dk]
* fixed tcl chanlist bug.  checks against channel flags and global flags now
  [reported by LSC] [patch by dk]
* extened tcl dcclist command to include bots, files receiving, files sending,
  and files send pending. [suggested by Ernesto] [patch by dk]
* changed botnet flags so that channel masters get master flag in whom and
  channel owners get owner flag in whom.  [patch by dk]
* only owners can change the passwords, addresses, nicks to shared bots or 
  delete hostmasks from shared bots or -user shared bots.  [suggested by
  DeathHand] [patch by DK]
* allowed for 8-bit channel names [patch by David Brauman]
* added botnet icon '%' for botnet masters [patch by dk]
* removed +g for global ops [patch by dk]
* updated info for Russian Net in nets.list [info from LuckyStar]
--- julius
* the nice little warning in case youre silly enough to eggdrop as root
  [patch by poptix]
* a whole slew of stuff fixing channel-specific flags with respect to 
  bans/kicks/ops, ie checking both global & channel-specific op flags etc
  [patch by beldin]
* binds for bot broadcasts (#define BEL_BROADCAST_BIND) [patch by beldin]
* binds for botnet channel join/parts (#define BEL_JOINS_PARTS) [patch by
  beldin]
* bots can broadcast unlink reason (#define BEL_UNLINK_REASON) [patch by
  beldin]
* channel *0-*99999 (100000->199999 to tcl scripts) are local-to-the-bot
  (#define BEL_LOCAL_CHANNELS) [patch by beldin]
* rejects can be restricted (#define REJECT_FROM_NOWHERE,#define
  REJECT_FROM_HUBS) [patch by beldin]
* much better handling of assoc on botlink (ie they get passed ;)
  (#define BEL_BETTER_ASSOC) [patch by beldin]
* handle botlinking differently - all bots TRY to link to new bot
  before unlinking old bot, priority is +sh, +h, +a (#define BEL_NEWLINKS)
  can try to link all +sh's (#define BEL_LINK_SHAREHUBS) [patch by beldin]
* +ban <hostname> [channel] [reason] <- channel option added
  (#define BEL_CHAN_BANS) [patch by beldin]
* +/- chrec for adding/removing channel records (#define BEL_CHAN_REC)
  (also tcl commands addchanrec & delchanrec) [patch by beldin]
* .filestats <nick> & .filestats <nick> clear for view file stats 
  from dcc (#define BEL_FILE_STATS) [patch by beldin]
* fixed a bug in DCC_GET timeout's [patch by beldin]
* included check for global +o's in stopnethack [patch by beldin]
* added the BOUNCE_SERVER_BANS define [patch by poptix]
* fixed multiple /ctcp chat replies [patch by beldin]
* added tcl commands to maniplulate laston times 
  & global laston info (#define BEL_LASTON) [patch by beldin]
* files-path, incoming-path & filedb-path are read-only [patch by beldin]
* add a tcl boot command (can do remote boots also) (#define BEL_BOOTS)
  [patch by beldin]
* Added cmw+pl1-3 patchesa [patch by cmwagner]
* fixed DL library detection in configure script after TCL version detection
  [patch by dk]
* fixed .nick bug [patch by dk]
* fixed msg help command to display ops only commands to channel 
  ops [patch by pteron]
* fixed bitch mode to make bot not deop masters or bots [patch by pteron]
* fixed kickban bug (reported by Jim Marco) [patch by dk]
* allowed channel masters to use .adduser [patch by dk]
* allowed channel masters to use .chattr to modify channel flags only
  [patch by dk]
* allowed channel masters to use .save [patch by dk]
* allowed channel masters to use .reload [patch by dk]
* allowed channel masters to change their console to +oc (misc and commands)
  [patch by dk]
* changed +/-ban for global bans to be a bot master only function [patch by dk]
* Removed define BEL_CHAN_BANS.  Made code for channel bans integrated in
  code [patch by dk]
* added command .deluser which deletes a user from the hosthask of his nick
  (main purpose is for channel masters to be able to remove users, but
  to only users currently on the channel.  Channel masters cannot deluser
  bots, bot masters, or bot owners) [patch by dk]
* Allowed all partyline users to use .nick [patch by dk]
* added ANSI style defines in header files to reduce compiling overhead
  [patch by dk]
* included any bug fixes in 1.0o+cmw+pl1-7 not included in grant+cmw+pl1-3
  [patch by cmwagner]
* included following updates from 1.0o to 1.0p:
  - kickban reasons are now being included in the kick
  - kickban will now let owner's kickban anyone, and masters can kickban ops
  - 437 numeric on DALnet/Undernet means you can't change your nickname
    because your nickname is banned, plus some buffer overflow fixes
    [patch by cmwagner]
  - 437 numeric (nickname/channel is juped) has been changed to reflect
    whether it is specfically the channel or the nickname, bot will not
    change nicknames if the channel is juped :)  [found by ernesto baschny]
    [patch by robey pointer]
  - added 'restart' command, this may cause some problems  [patch by cmwagner]
  - long nickname mask in whois command caused bot to crash
    [found by ernesto baschny]  [patch by cmwagner]
  - space before ctcp commands would be stripped off, could be used to detect
    eggdrop bots  [patch by cmwagner]
  - when rehashing and the bot was using the alternate nickname it would
    result in the bot thinking the nickname was in use and changing it
    [found by seth]  [patch by cmwagner]
  - party line wasn't being updated when attributes were being changed
    [found by imoq]  [patch by cmwagner]
  - topic command was not letting users change the topic on a non +t
    channel when the bot was opless  [found by deathhand]  [patch by cmwagner]
  - users were not being deopped when channel is set +revenge and they
    deop  [found by deathhand]  [patch by cmwagner]
* Fixed major bug in +/- chrec [patch by dk]
* Fixed bug in notes, sock # appearing in from (Reported by LSC) [patch by dk]
* Fixed bug in .restart, bot died on Tcl_DeleteInterp(interp); [patch by dk]
* Fixed bug in .trace, multiple traced responses (Reported by LSC) [patch by
  dk]
* Fixed Channel Flag bug (Reported by Preston) [patch by dk]
* Added Channel Flags 6-0 [patch by dk]
* Incoming notes display sock # of sender after nick if there is one [patch by
  dk]
* Implemented adduser for bots for shared bots [patch by dk]
* killuser, -host, and chattr cannot affect +s bots [patch by dk]
* Fix for altnick bug [patch by Wild]
* Added share-greet setting in config file.  0 do not send changes in info
  to shared bots, 1 do. [patch by dk]
* Fixed +bitch.  Channel masters can op people.  Also, don't need global ops
  and channel ops to keep ops in bitch mode [patch by dk]
* Changed deop so that bot and channel masters can deop users with +o flags
  [patch by dk]
--- grant
+ chanflags aren't treated right in tcl (to prevent overlap)
- dcc table should be used to cache user records

- file system:
  - export directories to other bots.  a notice is broadcast on the botnet
    once each hour for your exported directories (to let other bots know)
  - if 'auto-import' is on, send out an export-list-request when linking to
    a new bot.  whenever other bots broadcast exported directories, auto-add
    those directories to the specified place
  - set dcc-import-path "dcc/public/"
    Snowbot exports "/gifs/party" as "pgifs" --> "dcc/public/Snowbot/pgifs"
  - quota per-directory
  - change required-flags spec from integer to chars (doh!)
  - re-implement directory headers

* notes tell you if they're going to expire soon
* faster memory debugging  [suggested by ledpighp]
* can compile without including the file system now (for a moderate disk
  and memory savings)
* can specify a parting comment with '.quit'  [suggested by a person]
* 'u' flag on user specifies "unshared" (not transfered to other bots when
  sending the userfile, and kept even when downloading the userfile -- just
  like bot records)  [suggested by exile]
* flags o/d/f/k are channel-specific now (not global flags)
* 'g' flag meaning "global op" (virtual +o flag for every channel), also
  used to restrict access to dcc channel commands
* filedb's are locked from other bots when in use
* tcl 'valididx' to determine if an idx is ok to use  [suggested by by-tor]
* removed very old 'isolate' option
* +r bots that try to link directly will be rebuffed without sending any
  notices to other bots  [suggested by genady]
* tcl command 'backup' to backup the userfile
* added 'resetbans' tcl command  [suggested by xerox@foonet.net]
* 'who' users same flag chars (*/+) as 'whom' now
* 'raw' binding rewritten (WILL BREAK SCRIPTS) and no longer requires the
  +r console mode
* bots marked +u aren't shared either
* builtin bindings are now "*dcc:status" (or "*fil:ls" or "*msg:whois") to
  differentiate
* Tcl variables that link to internal eggdrop variables are now trace call-
  backs, meaning the values change at the same time, instead of the Tcl 
  variables being written and read back at each crossover between eggdrop
  and Tcl
* 'binds' command takes an 'all' option now
* new 'listen' tcl command allows much better control over telnet ports:
  can mark ports as bots-only or users-only (or allow all), can specify
  a nick-mask of people allowed to use that port, can set a port to go to
  a Tcl script -- and of course, can have more than 1 port open at a time
  (limited only by the size of your dcc table)
* removed meaningless 'telnet-bots-only' option
* put "Please enter your nickname." into the banner so it can be changed
* help files are stored in directory tree now (that was getting too
  messy)
* besides %B type substitutions, help_subst now supports %{stuff}, like
  arbitrary flag requirements %{+m}, the end of such a block %{end}, and
  center a line of text %{center}
* added subst %{cols=N} cos i'm feeling wacky
* understands concept of sticky bans now
* flags_ok was showing +m/+n users things that were restricted to +b (fixed)
* fixed tcl 'chattr' to use channel flags
* added tcl 'matchchanattr' to check for channel-specific flags
* tcl 'newban' and 'newchanban' can specify sticky bans now
* net module will now buffer binary connections
* added "turbo dcc" (set dcc-block 0) which made bot->user file transfers go
  about 2.5 times faster in rough tests (the entire file is buffered and then
  spat out thru the connection as fast as possible, ignoring the ack count
  until the entire file has been sent)
* revised whom info trading so that the same nick can be on more than once
  (oops)  (will cause incompatibilities)
* instead of sending constant NICK requests, uses slightly more clever way
  to determine if its nick can be regained (which shouldn't interfere with
  user-level ISON or USERHOST requests, and will help undernet users)
* can set 'whois-fields' which specifies which "xtra" fields to display in
  a '.whois' listing
* userfile resync can cause disasterous DEsync of userfiles, so it's turned
  off by default now
* tried to make whom info trading be more compatible -- 1.1 bots should be
  able to decode 1.0 stuff, but 1.0 bots may lose track of away/idle info
  (can't really be helped, the 1.0 way was broken)
* outgoing notes marked with sock#
* incoming note is delivered to the first non-away session, if not marked 
  with a sock# -- if all sessions are away, the oldest session is notified
  that the note arrived and was stored
* stackable notice binding 'notc'
* '-bot' command is spread to sharebots  [suggested by genady]
* +bitch mode for channels now won't let ANYONE be an op unless the bot
  (or a master) op'd them
* new commands 'stick' and 'unstick' to let party-line users change the
  "sticky" attribute of a ban
* 'bans' can take an optional channel-name argument  [suggested by by-tor]
* might (?) allow ansi color codes on the party line now
* completely changed FILT binding (potential incompatibility)
* tcl 'timer' and 'utimer' can accept a 0 timer now (executed immediately
  after control returns to eggdrop)
* parameters set by tclhash entry points are no longer global (may solve
  some reentrancy problems)
* when kicking +k users, a temporary channel ban is placed
* msg 'op' command can take a specific channel as argument  [patch by
  peace]
* writes pid file all the time now (not just when running in the background)
  [patch by peace]
* DIE_ON_TERMHUP split into 2 different defines  [patch by peace]
* 'adduser' command will take an optional handle (in case the user sometimes
  uses a different nick)
* added 'uptime' read-only var  [suggested by vince@who.net]
* added 'botnet-nick' for bots that wish to use a different nick on the
  botnet than on irc  [popular demand]
* creation date is stuck in the "xtra" field of a new user record  [suggested
  by tyson]
* +g users can get ops even without +o on that channel (doh!)  [patch by
  butchbub]
* can specify a separate port in a bot's link address to use for relay
  connections (separated by a '/')  [patch by butchbub]
* tries to take advantage of ircdu's 'SILENCE' command when ignoring msgs &
  ctcps  [suggested by timothy barbeisch]
* tcl 'bind' without a procname will return all procnames currently bound to
  that (ignoring required-flags)
* tcl 'putloglev' will accept any valid log level(s) now
* compile-time option to allow stacked responses to up to 3 stacked ctcps
  [patch by anonymous]
* removed require-x (it's always assumed to be on)
* 'listen' mask restriction that starts with '@' is a restriction on hostname
  not nick  [suggested by blap]
--- lincoln
* address in '.dccstat' for telnet connections was reversed (fixed)
* info lines can use euro characters now
* msg 'info' command requires a password  [patch by butchbub]
* stupid bug that made all tcl ints appear as "uptime" (fixed)  [patch by
  butchbub]
* tcl 'unbind' was broke (fixed)  [patch by butchbub]
* xtra field had a zillion "created" entries in it (fixed)  [patch by
  butchbub]
* 'bans all' would crash (fixed)  [patch by butchbub]
* sharebots now share channel flags  [patch by jeff hartman]
* pid file is named after the botnet nick now  [patch by gaven cohen]
* gainops fixed for 1.1  [patch by jonte]
* +bitch mode was deop'ing all server ops, regardless of whether they had
  ops before the split (fixed)  [found by butchbub]
* global op switched back to +o from +g
* sharebots now share chan-specific info lines  [patch by beldin]
* tcl 'getjointime' added  [suggested by gaven cohen]
  [ called getchanjoin ;) ]
* '.match' can scan for chan-specific flags  [patch by beldin]
* '.info', '.chinfo' support changing chan-specific info lines now  [patch
  by beldin/robey]
* msg 'info' supports chan-specific info lines too  [patch by beldin/robey]
* tcl 'getchaninfo', 'setchaninfo' added  [patch by beldin]
* was reaffirming owners before switching to the new userfile after a 
  sharebot download (fixed)  [patch by beldin]
* '.match' can accept "+m-g" etc  [based on patch by beldin, suggested by
  tyson]
* msg 'who' uses chan-specific info lines when appropriate
* tcl 'listen' could screw up the dcc table on error (fixed)
* logfiles stay open continuously now
* sharebots will share bot's user-flags now  [suggested by genady]
* finished converting help files
* userfile gets backed up at midnight again
* host removal for bot records over botnet wasn't working (fixed)
* bug in assoc removal (fixed)  [patch by beldin]
* on reload, aggressive bot will send userfile to passive sharebots again
  [patch by beldin]
* bots can't use msgs to set a password  [patch by beldin]
* tracks uploads/dnloads per user  [based on patch by beldin]
* can set the 5 chanflags by 'chanflag#'  [patch by beldin]
* tcl 'chnick' can have the password omitted (to reset it)  [patch by beldin]
* local users going to the file system just look "away" to remote users
  [patch by poptix]

